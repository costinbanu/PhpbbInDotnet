function resizeImage(n,t,i){lazyInit(t,i);var u=countQuotes(n,0),o=maxWidth-u*quoteWidthBleed,s=maxHeight-u*quoteHeightBleed,f=n.naturalWidth,e=n.naturalHeight,r=Math.min(s/e,o/f);r<1&&($(n).css({width:roundToNextEvenNumber(f*r)+"px",height:roundToNextEvenNumber(e*r)+"px"}),$(n).parent().is("a")||($(n).attr({onclick:"window.open(this.src);",title:"Click pentru imaginea mărită."}),$(n).css("cursor","pointer")))}function resizeIFrame(n,t,i){var u;lazyInit(t,i);var f=countQuotes(n,0),r=maxWidth-f*quoteWidthBleed,e=maxHeight-f*quoteHeightBleed;$(n).attr({width:roundToNextEvenNumber(r),height:Math.max(roundToNextEvenNumber(e/1.8),roundToNextEvenNumber(r*9/16))});u=$(n).attr("src");u.indexOf("imgur")!==-1&&$(n).attr("src",u+"?w="+r)}function countQuotes(n,t){return!n||!n.parentElement||n.parentElement.nodeName.toLowerCase()!="blockquote"?t:countQuotes(n.parentElement,t+1)}function lazyInit(n,t){quoteWidthBleed=quoteWidthBleed||$(".PostQuote").outerWidth(!0)-$(".PostQuote").width()||42;quoteHeightBleed=quoteHeightBleed||$(".PostQuote").outerHeight(!0)-$(".PostQuote").height()||62;maxWidth=maxWidth||n||roundToNextEvenNumber($(".FlexRow").width()-($(".Summary").is(":visible")?$(".Summary").outerWidth()*1.1:0));maxHeight=maxHeight||t||roundToNextEvenNumber($(window).innerHeight()-$("#topBanner").outerHeight())}function expandCollapsedMenu(n,t,i=false){var u=$("#"+n),r=$("#"+t),f,e;u.is(":visible")?u.hide("fast",function(){}):(f=i?r.position().top+5:r.offset().top,e=$(window).innerWidth()-(i?r.position().left+r.outerWidth():r.offset().left)-r.outerWidth(),u.css({right:e+"px",top:f+r.height()+10+"px"}),u.show("fast",function(){}))}function showElement(n,t,i,r=true){var u=$("#"+n);t||(t=function(){});i||(i=function(){});u.is(":visible")?u.hide("fast",t):(r&&u.height(roundToNextEvenNumber(u.height())),u.show("fast",i))}function writeDate(n,t){var i=new Date(n);t||(t="dddd, dd.MM.yyyy HH: mm");document.write(i.format(t))}function roundToNextEvenNumber(n){return n=Math.round(n),n%2==1&&(n=Math.round(n/2)*2),n}function showForumTree(n){showElement("forumTree",null,()=>{$("html, body").scrollTop($(n).offset().top-$("#topBanner").outerHeight()-10),$("#treeContainer").scrollTop($(".selectedTreeNode").offset().top-$("#treeContainer").offset().top-50)})}function openTab(n,t){for(var r,u=document.getElementsByClassName("tabcontent"),i=0;i<u.length;i++)u[i].style.display="none";for(r=document.getElementsByClassName("tablinks"),i=0;i<r.length;i++)r[i].className=r[i].className.replace(" active","");document.getElementById(t).style.display="block";n.currentTarget.className+=" active"}var dayNames=["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"],monthNames=["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],maxWidth,maxHeight,quoteWidthBleed,quoteHeightBleed;Date.prototype.format=function(n){var r=/\W+/,t=this,i;this.Date=function(n){var t=n.split(r);return t.forEach(function(t){typeof i[t]=="function"?n=n.replace(t,i[t]()):i.e(t)}),n};i={d:function(){return t.getDate()},dd:function(){return _pad(t.getDate(),2)},ddd:function(){return dayNames[t.getDay()].slice(0,3)},dddd:function(){return dayNames[t.getDay()]},f:function(){return parseInt(t.getMilliseconds()/100)},ff:function(){return parseInt(t.getMilliseconds()/10)},fff:function(){return t.getMilliseconds()},F:function(){return t.getMilliseconds()/100>0?parseInt(t.getMilliseconds()/100):""},FF:function(){return t.getMilliseconds()/10>0?parseInt(t.getMilliseconds()/10):""},FFF:function(){return t.getMilliseconds()>0?t.getMilliseconds():""},h:function(){return t.getHours()%12||12},hh:function(){return _pad(t.getHours()%12||12,2)},H:function(){return t.getHours()},HH:function(){return _pad(t.getHours(),2)},m:function(){return t.getMinutes()()},mm:function(){return _pad(t.getMinutes(),2)},M:function(){return t.getMonth()+1},MM:function(){return _pad(t.getMonth()+1,2)},MMM:function(){return monthNames[t.getMonth()].slice(0,3)},MMMM:function(){return monthNames[t.getMonth()]},s:function(){return t.getSeconds()},ss:function(){return _pad(t.getSeconds(),2)},t:function(){return t.getHours()>=12?"P":"A"},tt:function(){return t.getHours()>=12?"PM":"AM"},y:function(){return Number(t.getFullYear().toString().substr(2,2))},yy:function(){return _pad(t.getFullYear().toString().substr(2,2),2)},yyy:function(){var n=Number(t.getFullYear().toString().substr(1,2));return n>100?n:t.getFullYear()},yyyy:function(){return t.getFullYear()},yyyyy:function(){return _pad(t.getFullYear(),5)},z:function(){return parseInt(t.getTimezoneOffset()/60)},zz:function(){var n=parseInt(t.getTimezoneOffset()/60);return n<0&&(n="-"+_pad(Math.abs(n),2)),n},zzz:function(){var n=parseInt(t.getTimezoneOffset()/60),i=t.getTimezoneOffset()-60*n,r=_pad(n,2)+":"+_pad(Math.abs(i),2);return n<0&&(r="-"+_pad(Math.abs(n),2)+":"+_pad(Math.abs(i),2)),r},st:function(){var n=i.d();return n<4|n>20&&["st","nd","rd"][n%10-1]||"th"},e:function(n){throw"ERROR: Not supported method ["+n+"]";}};_pad=function(n,t){return(n=n+"").length<t?new Array(++t-n.length).join("0")+n:n};try{return this.Date(n)}catch(u){return this.Date("dd.MM.yyyy HH:mm")}};class Posting{constructor(n,t,i,r,u){this.form_name="postform";this.text_name="message";this.bbcode=[];this.bbtags=n;this.help_line=t;this.theSelection=!1;var f=navigator.userAgent.toLowerCase();this.clientVer=parseInt(navigator.appVersion);this.is_ie=f.indexOf("msie")!=-1&&f.indexOf("opera")==-1;this.is_win=f.indexOf("win")!=-1||f.indexOf("16bit")!=-1;this.baseHeight=0;this.hasConfirmation=!1;this.isAdmin=i;this.isEditAction=r;this.userDateFormat=u;this.showPollText="Arată opțiuni chestionar";this.hidePollText="Ascunde opțiuni chestionar";this.showAttachText="Arată opțiuni fișiere atașate";this.hideAttachText="Ascunde opțiuni fișiere atașate"}helpline(n){document.forms[this.form_name].helpbox.value=this.help_line[n]}initInsertions(){var n,t;n=document.forms[this.form_name]?document:opener.document;t=n.forms[this.form_name].elements[this.text_name];this.is_ie&&typeof this.baseHeight!="number"&&(t.focus(),this.baseHeight=n.selection.createRange().duplicate().boundingHeight,document.forms[this.form_name]||document.body.focus())}bbstyle(n){n!=-1?this.bbfontstyle(this.bbtags[n],this.bbtags[n+1]):(this.insert_text("[*]"),document.forms[this.form_name].elements[this.text_name].focus())}bbfontstyle(n,t){var i,f,r,u;if(this.theSelection=!1,i=document.forms[this.form_name].elements[this.text_name],i.focus(),this.clientVer>=4&&this.is_ie&&this.is_win){if(this.theSelection=document.selection.createRange().text,this.theSelection){document.selection.createRange().text=n+this.theSelection+t;document.forms[this.form_name].elements[this.text_name].focus();this.theSelection="";return}}else if(document.forms[this.form_name].elements[this.text_name].selectionEnd&&document.forms[this.form_name].elements[this.text_name].selectionEnd-document.forms[this.form_name].elements[this.text_name].selectionStart>0){this.mozWrap(document.forms[this.form_name].elements[this.text_name],n,t);document.forms[this.form_name].elements[this.text_name].focus();this.theSelection="";return}f=this.getCaretPosition(i).start;r=f+n.length;this.insert_text(n+t);isNaN(i.selectionStart)?document.selection&&(u=i.createTextRange(),u.move("character",r),u.select(),this.storeCaret(i)):(i.selectionStart=r,i.selectionEnd=r);i.focus();return}insert_text(n,t,i){var r,f,e,u;r=i?opener.document.forms[this.form_name].elements[this.text_name]:document.forms[this.form_name].elements[this.text_name];t&&(n=" "+n+" ");isNaN(r.selectionStart)?r.createTextRange&&r.caretPos?(this.baseHeight!=r.caretPos.boundingHeight&&(r.focus(),this.storeCaret(r)),u=r.caretPos,u.text=u.text.charAt(u.text.length-1)==" "?u.text+n+" ":u.text+n):r.value=r.value+n:(f=r.selectionStart,e=r.selectionEnd,this.mozWrap(r,n,""),r.selectionStart=f+n.length,r.selectionEnd=e+n.length);i||r.focus()}attach_inline(n,t){this.insert_text("[attachment="+n+"]"+t+"[/attachment]");document.forms[this.form_name].elements[this.text_name].focus()}getCaretPosition(n){var t=new CaretPosition,u,i,r;if(n.selectionStart||n.selectionStart==0)t.start=n.selectionStart,t.end=n.selectionEnd;else if(document.selection){for(u=document.selection.createRange(),i=document.body.createTextRange(),i.moveToElementText(n),r=0;i.compareEndPoints("StartToStart",u)<0;r++)i.moveStart("character",1);n.sel_start=r;t.start=n.sel_start;t.end=n.sel_start}return t}mozWrap(n,t,i){var u=n.textLength,f=n.selectionStart,r=n.selectionEnd,e=n.scrollTop;(r==1||r==2)&&(r=u);var o=n.value.substring(0,f),s=n.value.substring(f,r),h=n.value.substring(r,u);n.value=o+t+s+i+h;n.selectionStart=r+t.length+i.length;n.selectionEnd=n.selectionStart;n.focus();n.scrollTop=e;return}storeCaret(n){n.createTextRange&&(n.caretPos=document.selection.createRange().duplicate())}change_palette(){showElement("colour_palette",function(){$("#bbpalette").val("Culoare font")},function(){$("#bbpalette").val("Ascunde culoarea fontului")})}show_hidden_formatters(){showElement("controls",function(){$(".PostingControlsButton").text("Opțiuni formatare")},function(){$(".PostingControlsButton").text("Ascunde opțiunile de formatare")})}show_hidden_smilies(){showElement("hiddenSmilies",function(){$("#showHiddenSmiliesButton").text("Arată mai multe")},function(){$("#hiddenSmilies").find("img").each((n,t)=>{resizeImage(t,$("#hiddenSmilies").parent()[0].offsetWidth,$("#hiddenSmilies").parent()[0].offsetHeight)});$("#showHiddenSmiliesButton").text("Arată mai puține")},!1)}censor(){var n=document.getElementById("message"),r,i,u,f,t,e;if(n){if(n.value=n.value.replace(/postimage/gi,"*****"),n.value=n.value.replace(/postimg/gi,"*****"),n.value=n.value.replace(/photobucket/gi,"*****"),n.value=n.value.replace(/imageshack/gi,"*****"),r=n.value.split("[img]").length-1,r>10&&!this.isAdmin)return alert("Ati inclus "+r+" imagini in mesaj. Numarul maxim permis: 10."),!1;for(i=n.value.match(/\[img\](.*?)\[\/img\]/g).map(n=>n.replace(/\[\/?img\]/g,"")),document.getElementById("imgcheckstatus").style.visibility="visible",u=!0,f=[],t=0;t<i.length;t++)i[t].indexOf("metrouusor")==-1&&(document.getElementById("imgcheckstatus").innerHTML="Sunt verificate imaginile incluse in mesaj.<br/>Va rugam asteptati...<br/>"+Math.round(t*100/i.length)+"%",e=$.ajax({type:"GET","async":!1,url:i[t],success:n=>{n.length/1048576>2&&!this.isAdmin&&(u=!1,f.push(i[t]))},error:(n,t,i)=>{console.log(t,i)}}));return u||this.isAdmin?(document.getElementById("imgcheckstatus").style.visibility="hidden",!0):(document.getElementById("imgcheckstatus").style.visibility="hidden",alert("Nu este permisa includerea unor imagini avand peste 2MB dimensiune. Urmatoarele imagini sunt mai mari:\n"+f.join("\n")),!1)}return!0}showExpirationDate(n){var i=document.getElementById("pollExpirationHelper"),t;if(n==0){i.innerText="Chestionarul nu va expira niciodată";return}t=new Date;t.setSeconds(t.getSeconds()+n*86400);i.innerText="Chestionarul expiră "+t.format(this.userDateFormat)}confirmPollChange(){this.isEditAction&&!this.hasConfirmation&&confirm("Dacă modificați opțiunile, toate voturile înregistrate până acum vor fi șterse. Continuați?")&&(this.hasConfirmation=!0)}togglePanel(n,t,i,r){showElement(n,function(){$("#"+t).text(r)},function(){$("#"+t).text(i)})}toggleAttach(){$("#pollPanel").is(":visible")&&this.togglePanel("pollPanel","pollButton",this.hidePollText,this.showPollText);this.togglePanel("attachPanel","attachButton",this.hideAttachText,this.showAttachText)}togglePoll(){$("#attachPanel").is(":visible")&&posting.togglePanel("attachPanel","attachButton",this.hideAttachText,this.showAttachText);this.togglePanel("pollPanel","pollButton",this.hidePollText,this.showPollText)}submitAttachments(){$("#submitAttachmentsButton").trigger("click");$("#fileUploadStatus").text("Se încarcă fișierele...")}}class CaretPosition{constructor(){this.start=null;this.end=null}}class ViewTopic{constructor(n,t,i,r,u,f,e){this.postId=n;this.highlight=t;this.scrollToModPanel=i;this.moveTopic=r;this.moveSelectedPosts=u;this.splitSelectedPosts=f;this.otherReportReasonId=e}onLoad(){var t;if(this.postId!=-1){var i=$("#"+this.postId),n=i.offset().top,r=$("#topBanner").outerHeight(!0);window.scrollTo(0,n>r?n-r:n);t=i.parent().parent();t&&this.highlight&&t.addClass("Highlight")}this.scrollToModPanel&&document.getElementById("moderatorForm").scrollIntoView()}switchPollPanels(n,t,i){showElement(n,function(){i.value="Arată rezultatele"},function(){i.value="Votează"});showElement(t)}showTopicExtraInput(n){$(n).val()==this.moveTopic&&($("#extraInputPostForum").hide("fast"),$("#extraInputPostTopic").hide("fast"),$("#extraInputTopic").show("fast"));$("#topicAction").val($(n).val());$("#showTopicSelector").val("false")}showPostExtraInput(n){$(n).val()==this.moveSelectedPosts?($("#extraInputPostForum").hide("fast"),$("#extraInputTopic").hide("fast"),$("#extraInputPostTopic").show("fast"),$("#showTopicSelector").val("true")):$(n).val()==this.splitSelectedPosts&&($("#extraInputTopic").hide("fast"),$("#extraInputPostTopic").hide("fast"),$("#extraInputPostForum").show("fast"),$("#showTopicSelector").val("false"));$("#postAction").val($(n).val())}appendPostId(n,t){var i=$("#selectedPostIds").val().split(","),r;n.checked?i.push(t.toString()):(r=i.indexOf(t.toString()),r>-1&&i.splice(r,1));$("#selectedPostIds").val(i.join(","))}confirmAction(n){var t=$(n).val();return t.startsWith("Delete")?confirm("Am primit comanda '"+t+"'. Continuați?"):!0}showMessageDetails(n){$("#postInfoContent").html("<b>IP:<\/b> "+n);showElement("postInfo")}showReportForm(n,t=null,i=null,r=null){$("#reportPostId").val(n);$("#reportReason").val(i?i:"-1");$("#reportId").val(t);$("#reportDetails").val(r);$("#reportValidation").hide();showElement("report")}validateReportForm(){var t=$("#reportReason").val(),i=$("#reportDetails").val(),n=$("#reportValidation");return t?t==this.otherReportReasonId&&(!i||i.length<3)?(n.text("Completează detaliile raportului (min. 3 caractere)."),n.show(),!1):!0:(n.text("Alege un motiv pentru raport."),n.show(),!1)}showReportViewer(n,t,i,r,u){$("#reportViewerReportPostId").val(n);$("#reportViewerReportReasonTitle").text(i);$("#reportViewerReportReasonDescription").text(r);$("#reportViewerReportId").val(t);$("#reportViewerReportDetails").text(u);$("#reportViewerEditMessage").prop("checked",!1);$("#reportViewerDeleteMessage").prop("checked",!1);showElement("reportViewer")}confirmDeleteReportedPost(){return $("#reportViewerDeleteMessage").is(":checked")?confirm("Ai ales să ștergi mesajul raportat. Ești sigur?"):!0}}