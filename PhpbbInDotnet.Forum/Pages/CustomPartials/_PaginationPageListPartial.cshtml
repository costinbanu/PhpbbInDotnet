@model PhpbbInDotnet.Forum.Pages.CustomPartials._PaginationPageListPartialModel

@inject Languages.LanguageProvider _languageProvider

@if (Model.Pagination.HasPages)
{
    <span style="display:inline">
        <span style="white-space:nowrap; line-height: 1.5em">@Html.Raw(_languageProvider.BasicText[Model.Language, "GO_TO_PAGE"]):&nbsp;</span>
        <span style="white-space:nowrap; line-height: 1.5em">
            @if (Model.Pagination.Pager.StartPage > 1)
            {
                Model.Pagination.Link.Set(Model.Pagination.PageNumKey, "1");
                <span class="PageNum">
                    <a href="@Model.Pagination.Link.ToString()">1</a>
                </span>
                <span>&nbsp;...</span>
            }

            @foreach (var curPage in Model.Pagination.Pager.Pages)
            {
                if (curPage == Model.Pagination.CurrentPage)
                {
                    <span style="display: inline-block; padding: 2px;">@curPage</span>
                }
                else
                {
                    Model.Pagination.Link.Set(Model.Pagination.PageNumKey, curPage.ToString());
                    <span class="PageNum">
                        <a href="@Model.Pagination.Link.ToString()">@curPage</a>
                    </span>
                }
            }

            @if (Model.Pagination.Pager.EndPage + 3 < Model.Pagination.Pager.TotalPages)
            {
                Model.Pagination.Link.Set(Model.Pagination.PageNumKey, Model.Pagination.Pager.TotalPages.ToString());
                <span>&nbsp;...</span>
                <span class="PageNum">
                    <a href="@Model.Pagination.Link.ToString()">@Model.Pagination.Pager.TotalPages</a>
                </span>
            }
            else if (Model.Pagination.Pager.EndPage < Model.Pagination.Pager.TotalPages)
            {
                for (var num = Model.Pagination.Pager.EndPage + 1; num <= Model.Pagination.Pager.TotalPages; num++)
                {
                    Model.Pagination.Link.Set(Model.Pagination.PageNumKey, num.ToString());
                    <span class="PageNum">
                        <a href="@Model.Pagination.Link.ToString()">@num</a>
                    </span>
                }
            }
        </span>
    </span>
}

